=content_for :page_title_prefix, t("page_title.organisation.show", name: @organisation_presenter.name)

= organisation_page_back_link(current_user, params)

%main.govuk-main-wrapper#main-content{ role: "main" }
  .govuk-grid-row
    .govuk-grid-column-full
      %h1.govuk-heading-xl
        = @organisation_presenter.name

  - if policy(:programme).index?
    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.organisation.programmes")

        = render partial: "staff/shared/programmes/table", locals: { programmes: @programme_activities }

  - if policy(:project).index?
    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.organisation.projects")

        = render partial: "staff/shared/projects/table", locals: { projects: @project_activities }

  - if policy(@organisation_presenter).download? && @project_activities.present?
    .govuk-grid-row
      .govuk-grid-column-full.download-projects
        %div.govuk-body
          = t("page_content.organisation.download.projects.explanation")
        = link_to t("default.button.download_as_xml"), organisation_path(@organisation_presenter, format: :xml, level: :project), class: "govuk-button"


  - if policy(:third_party_project).index?
    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.organisation.third_party_projects")

        = render partial: "staff/shared/third_party_projects/table", locals: { third_party_projects: @third_party_project_activities }

  - if policy(@organisation_presenter).download? && @third_party_project_activities.present?
    .govuk-grid-row
      .govuk-grid-column-full.download-third-party-projects
        %div.govuk-body
          = t("page_content.organisation.download.third-party-projects.explanation")
        = link_to t("default.button.download_as_xml"), organisation_path(@organisation_presenter, format: :xml, level: :third_party_project), class: "govuk-button"


  .govuk-grid-row
    .govuk-grid-column-two-thirds
      %h2.govuk-heading-m
        = t("page_content.organisation.details")

      %dl.govuk-summary-list
        .govuk-summary-list__row
          %dt.govuk-summary-list__key
            = t("summary.label.organisation.iati_reference")
          %dd.govuk-summary-list__value
            = @organisation_presenter.iati_reference
        .govuk-summary-list__row
          %dt.govuk-summary-list__key
            = t("summary.label.organisation.organisation_type")
          %dd.govuk-summary-list__value
            = t("organisation.organisation_type.#{@organisation_presenter.organisation_type}")
        .govuk-summary-list__row
          %dt.govuk-summary-list__key
            = t("summary.label.organisation.language_code")
          %dd.govuk-summary-list__value
            = t("organisation.language_code.#{@organisation_presenter.language_code}")
        .govuk-summary-list__row
          %dt.govuk-summary-list__key
            = t("summary.label.organisation.default_currency")
          %dd.govuk-summary-list__value
            = t("generic.default_currency.#{@organisation_presenter.default_currency}")

      - if policy(:organisation).edit?
        = link_to t("page_content.organisation.button.edit_details"), edit_organisation_path(@organisation_presenter), class: "govuk-button"
