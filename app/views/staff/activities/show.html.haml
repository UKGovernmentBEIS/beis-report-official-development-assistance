=content_for :page_title_prefix, t("page_title.activity.show", name: @activity.title)

= link_to t("generic.link.back"), activity_back_path(@activity), class: "govuk-back-link"
%main.govuk-main-wrapper#main-content{ role: "main" }
  .govuk-grid-row
    .govuk-grid-column-two-thirds
      %h1.govuk-heading-xl
        = @activity.title

  .govuk-grid-row
    .govuk-grid-column-two-thirds
      = render partial: "staff/shared/activities/activity", locals: { activity_presenter: ActivityPresenter.new(@activity) }

  - if @activity.is_fund_level?
    .govuk-grid-row
      .govuk-grid-column-two-thirds
        %h2.govuk-heading-m
          = t("page_content.organisation.programmes")
        = form_tag(organisation_fund_programmes_path(@activity.organisation, @activity), method: "post") do
          = submit_tag t("page_content.organisation.button.create_programme"), class: "govuk-button"
        %ul.govuk-list.govuk-list--bullet
          - @activities.each do |activity|
            %li
              = link_to activity.display_title, organisation_activity_path(activity.organisation, activity)

  - if @activity.is_programme_level?
    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.activity.extending_organisation.heading")

        -if @activity.extending_organisation.present?
          %p.govuk-body
            = @activity.extending_organisation.name

        = link_to(I18n.t("page_content.activity.extending_organisation.button.edit"), edit_activity_extending_organisation_path(@activity), class: "govuk-button")

    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.activity.projects")

        = render partial: '/staff/shared/projects/table', locals: { projects: @activities }
        = button_to t("page_content.organisation.button.create_project"), organisation_fund_programme_projects_path(@activity.organisation, @activity.parent_activity, @activity), class: "govuk-button"

  .govuk-grid-row
    .govuk-grid-column-full
      %h2.govuk-heading-m
        = t("page_content.activity.transactions")

      = link_to(I18n.t("page_content.transactions.button.create"), new_activity_transaction_path(@activity), class: "govuk-button")
      = render partial: '/staff/shared/transactions/table', locals: { transactions: @transaction_presenters }

  - if @activity.is_programme_level?
    .govuk-grid-row
      .govuk-grid-column-full
        %h2.govuk-heading-m
          = t("page_content.activity.budgets")

        = link_to(I18n.t("page_content.budgets.button.create"), new_activity_budget_path(@activity), class: "govuk-button")
        = render partial: '/staff/shared/budgets/table', locals: { budgets: @budget_presenters }
