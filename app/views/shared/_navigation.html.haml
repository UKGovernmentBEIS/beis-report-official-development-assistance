%nav
  %ul{id: 'navigation', class: 'govuk-header__navigation', aria: { label: "Top Level Navigation"}}
    -if defined?(current_user) && current_user.active?

      %li{ class: navigation_item_class(organisation_path(current_user.organisation)) }
        %a{ href: organisation_path(current_user.organisation), class: 'govuk-header__link' }
          = t("page_title.home")

      - unless current_user.organisation.service_owner
        %li{ class: navigation_item_class(organisation_activities_path(current_user.organisation)) }
          = link_to t("page_title.activity.index"), organisation_activities_path(current_user.organisation), class: "govuk-header__link"

      - if policy(Organisation).index?
        %li{ class: navigation_item_class(organisations_path) }
          = link_to t("page_title.organisation.index"), organisations_path, class: "govuk-header__link"

      - if policy(User).index?
        %li{ class: navigation_item_class(users_path) }
          = link_to t("page_title.users.index"), users_path, class: "govuk-header__link"

      - if authenticated?
        %li{ class: navigation_item_class(users_path) }
          %a{ href: sign_out_path, class: 'govuk-header__link' }
            = t("header.link.sign_out")

      - else
        %li{ class: navigation_item_class(users_path) }
          .govuk-header__content.app-header__user-links.app-visitor
            %a.govuk-header__link{ data: { method: "post" }, href: "/auth/auth0" }
              = t('header.link.sign_in')
